!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):r.decodeMmtf=t()}(this,function(){"use strict";function r(r,t,n){return t?new r(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function t(t){return r(DataView,t)}function n(t){return r(Uint8Array,t)}function e(t){return r(Int8Array,t)}function o(t){return r(Int32Array,t,4)}function u(t){return r(Float32Array,t,4)}function a(r,t){var n=r.length/2;t||(t=new Int16Array(n));for(var e=0,o=0;n>e;++e,o+=2)t[e]=r[o]<<8^r[o+1]<<0;return t}function i(r,t){var n=r.length/4;t||(t=new Int32Array(n));for(var e=0,o=0;n>e;++e,o+=4)t[e]=r[o]<<24^r[o+1]<<16^r[o+2]<<8^r[o+3]<<0;return t}function s(r,n){var e=r.length;n||(n=new Float32Array(e/4));for(var o=t(n),u=t(r),a=0,i=0,s=e/4;s>a;++a,i+=4)o.setFloat32(i,u.getFloat32(i),!0);return n}function c(r,t,n){var e=r.length,o=1/t;n||(n=new Float32Array(e));for(var u=0;e>u;++u)n[u]=r[u]*o;return n}function f(r,t){var n,e;if(!t){var o=0;for(n=0,e=r.length;e>n;n+=2)o+=r[n+1];t=new r.constructor(o)}var u=0;for(n=0,e=r.length;e>n;n+=2)for(var a=r[n],i=r[n+1],s=0;i>s;++s)t[u]=a,++u;return t}function d(r,t){var n=r.length;t||(t=new r.constructor(n)),n&&(t[0]=r[0]);for(var e=1;n>e;++e)t[e]=r[e]+t[e-1];return t}function l(r,t){var n,e,o=r instanceof Int8Array?127:32767,u=-o-1,a=r.length;if(!t){var i=0;for(n=0;a>n;++n)r[n]<o&&r[n]>u&&++i;t=new Int32Array(i)}for(n=0,e=0;a>n;){for(var s=0;(r[n]===o||r[n]===u)&&(s+=r[n],++n,0!==r[n]););s+=r[n],++n,t[e]=s,++e}return t}function y(r,t){return d(f(r),t)}function v(r,t,n){return c(f(r,o(n)),t,n)}function L(r,t,n){return c(d(r,o(n)),t,n)}function m(r,t,n){return c(l(r,o(n)),t,n)}function p(r,t,n){var e=l(r,o(n));return L(e,t,u(e))}function h(r){var n=t(r),e=n.getInt32(0),o=n.getInt32(4),u=r.subarray(8,12),r=r.subarray(12);return[e,r,o,u]}function g(r,t,o,u){switch(r){case 1:return s(t);case 2:return e(t);case 3:return a(t);case 4:return i(t);case 5:return n(t);case 6:return f(i(t),new Uint8Array(o));case 7:return f(i(t));case 8:return y(i(t));case 9:return v(i(t),i(u)[0]);case 10:return p(a(t),i(u)[0]);case 11:return c(a(t),i(u)[0]);case 12:return m(a(t),i(u)[0]);case 13:return m(e(t),i(u)[0]);case 14:return l(a(t));case 15:return l(e(t))}}function A(r,t){t=t||{};var n=t.ignoreFields,e={};return w.forEach(function(t){var o=n?-1!==n.indexOf(t):!1,u=r[t];o||void 0===u||(u instanceof Uint8Array?e[t]=g.apply(null,h(u)):e[t]=u)}),e}var I=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],b=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],w=I.concat(b);return A});